<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Fractal Boston</title>
    <meta
      name="description"
      content="A community of curious minds, warm hearts, and shared adventures"
    />
    <meta name="keywords" content="fractal, boston, community" />

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Fractal Boston" />
    <meta
      name="twitter:description"
      content="A community of curious minds, warm hearts, and shared adventures"
    />
    <meta
      name="twitter:image"
      content="https://fractal.boston/img/logo-square.png"
    />
    <meta property="og:title" content="Fractal Boston" />
    <meta
      property="og:description"
      content="A community of curious minds, warm hearts, and shared adventures"
    />
    <meta
      property="og:image"
      content="https://fractal.boston/img/logo-square.png"
    />
    <meta property="og:url" content="https://fractal.boston" />
    <meta property="og:type" content="website" />

    <link rel="shortcut icon" href="img/logo-square.png" />
    <link rel="stylesheet" href="normalize.css" />
    <link rel="stylesheet" href="styles.css" />

    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-523DXHRFKR"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-523DXHRFKR");
    </script>
  </head>
  <body>
    <main>
      <header>
        <h1>Fractal Boston</h1>
        <div class="decorative-element" aria-hidden="true">✧</div>
        <div class="floating-shapes" aria-hidden="true">
          <span class="shape shape-1">◈</span>
          <span class="shape shape-2">✦</span>
          <span class="shape shape-3">◆</span>
          <span class="shape shape-4">◯</span>
          <span class="shape shape-5">✧</span>
        </div>
      </header>

      <div class="hero-section">
        <div class="hero-content">
          <h2><span class="highlight">A community of curious minds, warm hearts, and shared adventures.</span></h2>
          <p>
            We choose to gather regularly, learn from each other, and live a better life surrounded by friends.
          </p>

          <div id="heroCtaContainer" class="buttons">
            <a href="/join" class="main-cta" id="interestFormLink">
              <button class="block accent">✨ Sign me up ✨</button>
            </a>
          </div>

          <div id="heroFormContainer" class="center">
            <form id="heroSubscribeForm" action="javascript:void(0);" method="post" novalidate>
              <div class="form-group">
                <input type="email" id="heroEmail" name="email" required placeholder="name@domain.com" />
              </div>
              <div class="submit-button-container">
                <div class="submit-cta">
                  <button type="submit">✨ Subscribe ✨</button>
                </div>
              </div>
            </form>
          </div>

          <div id="heroConfirmationMessage" class="confirmation-message" style="display: none;">
            <h3>Check your email!</h3>
            <p>Let&rsquo;s make sure our emails can reach you.</p>
            <p>Please check your email and click the verification link.</p>
          </div>
        </div>
      </div>

        <div class="activities-section">
          <h2>Things We Do Together</h2>

          <h3>Monthly Dinner</h3>
          <div class="event-block card">
            <img src="img/chatting-at-dinner.jpeg" alt="Fractal members chatting and socializing" class="event-photo" />
            <img src="img/daniel-lightning-talk.jpeg" alt="Daniel Golliher giving a lightning talk" class="event-photo" />
            <iframe width="560" height="315" src="https://www.youtube.com/embed/mtjOFICbvRk" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen style="width: 100%; max-width: 100%; border-radius: 20px 80px 30px 70px / 30% 20% 30% 20%; transform: rotate(1deg); margin-bottom: 1.5rem; border: 3px solid var(--main-color);"></iframe>
            <div class="event-content">
              <p>
                Once a month we get everyone together for dinner.
              </p>
              <p>
                We chat, decompress, and place a big group order for food.
                After eating, we sometimes give casual lightning talks to each
                other. People share what they're reading, recent significant
                experiences, or sometimes even a song.
              </p>
            </div>
          </div>

          <h3>Fractal Boston University</h3>
          <div class="education-block card">
            <p>
              We love learning, and think more folks should teach what they
              know. That&rsquo;s why we created Fractal Boston University, a
              DIY education experiment where we teach each other about our
              passions.
            </p>
            <p>
              Past classes have ranged wonderfully wide: &ldquo;How The Somerville City Government Works,&rdquo; &ldquo;Chakra-Inspired Yoga,&rdquo; and &ldquo;Pencil Portraiture.&rdquo;
            </p>
            <p>
              It turns out many people have knowledge worth sharing, and you don't need much more than curious students and a spare living room to unlock it.
            </p>
            <p>
              See past course offerings from Fall 2025 on the <a href = "https://fractalboston.notion.site/FBU-Fall-2025-Courses-28b63241cd3e8025961bd30a7a41e2b6"> FBU Fall 2025 </a> page. Stay tuned for updates on the Spring 2026 semester.
            </p>
          </div>

          <h3>Coworking Sessions</h3>
          <div class="coworking-block card">
            <img src="img/coworking.jpeg" alt="Fractal members working together at a coffee shop coworking session" class="event-photo" />
            <div class="event-content">
              <p>
                We meet up 1-2 times a week at coffee shops to work on our
                projects together. Folks often say it's the most productive part of their week.
              </p>
              <p>
                Coffee breaks frequently turn into brainstorming sessions, writing feedback, or debugging help.
              </p>
            </div>
          </div>
        </div>
  
      <div class="luma-calendar card">
         <h3>Upcoming Events</h3>

        <p>
  Check out our calendar to see our monthly dinners, classes, coworking sessions, and special gatherings.
        </p>

        <p>
  Subscribe to stay in the loop with everything happening at Fractal Boston!
        </p>

        <p>
  <a href="/calendar" target="_blank" style="text-decoration: none;">
    <button class="block accent calendar-button">See our group calendar</button>
   </a>
  </p>
      </div>
      

        <h2>It seems to be working!</h2>
        <div class="member-story card">
          <img src="img/celia.png" alt="Celia" class="member-photo" />
          <div class="story-content">
            <h4>Celia's Story</h4>
            <blockquote>
              &ldquo;I was planning on living in a series of cities for six weeks each to decide where I wanted to settle down. After finding Fractal Boston, I canceled that plan and signed a year-long lease. The community is a large part of why I chose to live here.&rdquo;
            </blockquote>
            <p class="attribution">— Celia, Fractal regular</p>
          </div>
        </div>

        <h2>Where&rsquo;d this idea come from?</h2>
        <div class="origin-block card">
          <p>
            <a href="https://fractalnyc.com" target="_blank" rel="noopener">Fractal NYC</a> started in 2021 when Priya and Andrew created a community of artists, technologists, and humanists who wanted to live near each other. They grew to over 1000 members with events, classes, coworking spaces, and even got apartments in the same building.
          </p>
          <p>
            With Andew and Priya's blessing (and advice!), we're running that same playbook and trying to bring that magic to Boston. Wanna help? Join us!
          </p>
          <p>
            Find more information, including past newsletters and course offerings, on the <a href="https://fractalboston.substack.com/" >Fractal Boston Substack</a>. 
          </p>
        </div>
        <div class="stay-connected card">
          <div id="footerSignupContent">
            <h3>Be In Touch</h3>
            <p>
              <strong>Ready to join?</strong> <a href="/calendar" target="_blank" rel="noopener noreferrer nofollow">Come to an event</a>
            </p>
            <p>
              <strong>Just curious?</strong> Subscribe for updates about events and what we&rsquo;re building:
            </p>
            <div id="footerFormContainer" class="center">
              <form id="footerSubscribeForm" action="javascript:void(0);" method="post" novalidate>
                <div class="form-group">
                  <input type="email" id="footerEmail" name="email" required placeholder="name@domain.com" />
                  <div id="footerEmailSuggestion" class="email-suggestion"></div>
                </div>
                <div class="submit-button-container">
                  <div class="submit-cta">
                    <button type="submit">✨ Subscribe ✨</button>
                  </div>
                </div>
              </form>
            </div>
          </div>
          <div id="footerConfirmationMessage" class="confirmation-message" style="display: none;">
            <h3>Check your email!</h3>
            <p>Let&rsquo;s make sure our emails can reach you.</p>
            <p>Please check your email and click the verification link.</p>
          </div>
        </div>

      </div>

      <footer>
        <!-- <a href="/feed">RSS</a> -->
      </footer>
    </main>

    <script type="module">
      import emailSpellChecker from 'https://cdn.jsdelivr.net/npm/@zootools/email-spell-checker@1.12.0/+esm';
      const transitionMs = 300;
      const isLocalhost = window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1";
      const API_URL = isLocalhost
        ? "http://localhost:3000/api/subscribe"
        : "https://fractal-boston-events.vercel.app/api/subscribe";

      function triggerJiggle(input) {
        input.classList.add('jiggle');
        input.addEventListener('animationend', function onEnd() {
          input.classList.remove('jiggle');
          input.removeEventListener('animationend', onEnd);
        }, { once: true });
      }

      function renderError(container) {
        const errorMessage = document.createElement('div');
        errorMessage.className = 'error-message';
        errorMessage.style.color = '#ff4444';
        errorMessage.style.marginTop = '1rem';
        errorMessage.textContent = 'Failed to subscribe. Please try again later.';

        const existingError = container.querySelector('.error-message');
        if (existingError) existingError.remove();
        container.appendChild(errorMessage);

        setTimeout(() => errorMessage.remove(), 5000);
      }

      async function submitSubscription(email) {
        const response = await fetch(API_URL, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ email }),
        });

        const data = await response.json();
        if (!response.ok || !data.success) {
          throw new Error(data.error || 'Failed to subscribe');
        }
      }

      function setupSubscribeForm(options) {
        const {
          formId,
          emailInputId,
          formContainerId,
          confirmationId,
          eventLabel,
          suggestionId,
          signupContentId,
          lockCardSelector,
          confirmationDisplay = 'block',
        } = options;

        const form = document.getElementById(formId);
        const emailInput = document.getElementById(emailInputId);
        const formContainer = document.getElementById(formContainerId) || form;
        const confirmationMessage = document.getElementById(confirmationId);
        const signupContent = signupContentId ? document.getElementById(signupContentId) : null;
        const lockCard = lockCardSelector ? form?.closest(lockCardSelector) : null;

        if (!form || !emailInput || !formContainer || !confirmationMessage) {
          return;
        }

        if (suggestionId) {
          const suggestionContainer = document.getElementById(suggestionId);
          if (suggestionContainer) {
            emailInput.addEventListener('blur', function () {
              const suggestion = emailSpellChecker.run({ email: emailInput.value });
              if (suggestion) {
                suggestionContainer.innerHTML =
                  'Did you mean <a href="#" class="email-suggestion-link">' + suggestion.full + '</a>?';
                const suggestionLink = suggestionContainer.querySelector('.email-suggestion-link');
                suggestionLink.addEventListener('click', function (event) {
                  event.preventDefault();
                  emailInput.value = suggestion.full;
                  suggestionContainer.innerHTML = '';
                });
              } else {
                suggestionContainer.innerHTML = '';
              }
            });
          }
        }

        form.addEventListener('submit', async function (e) {
          e.preventDefault();
          e.stopPropagation();

          const email = emailInput.value.trim();
          if (!email) {
            triggerJiggle(emailInput);
            return;
          }

          const submitButton = form.querySelector('button[type="submit"]');
          submitButton.disabled = true;
          submitButton.textContent = 'Subscribing...';

          if (typeof gtag !== 'undefined') {
            gtag("event", "form_submit", {
              event_category: "engagement",
              event_label: eventLabel,
            });
          }

          try {
            await submitSubscription(email);

            if (lockCard) {
              lockCard.style.minHeight = lockCard.offsetHeight + 'px';
            }

            if (signupContent) {
              signupContent.style.opacity = '0';
              signupContent.style.transition = 'opacity 0.3s ease-out';
              setTimeout(() => {
                signupContent.style.display = 'none';
                confirmationMessage.style.display = confirmationDisplay;
              }, transitionMs);
              return;
            }

            formContainer.style.opacity = '0';
            formContainer.style.transition = 'opacity 0.3s ease-out';
            setTimeout(() => {
              formContainer.style.display = 'none';
              confirmationMessage.style.display = confirmationDisplay;
            }, transitionMs);
          } catch (error) {
            console.error('Subscription error:', error);
            submitButton.disabled = false;
            submitButton.textContent = '✨ Subscribe ✨';
            renderError(formContainer);
          }
        });
      }

      const interestFormLink = document.getElementById("interestFormLink");
      const heroCtaContainer = document.getElementById("heroCtaContainer");
      const heroFormContainer = document.getElementById("heroFormContainer");

      if (interestFormLink && heroCtaContainer && heroFormContainer) {
        interestFormLink.addEventListener("click", function (e) {
          e.preventDefault();

          if (typeof gtag !== 'undefined') {
            gtag("event", "button_click", {
              event_category: "engagement",
              event_label: "Interest Form Link Click",
            });
          }

          if (heroFormContainer.style.display === 'block') {
            return;
          }

          heroCtaContainer.style.opacity = '0';
          heroCtaContainer.style.transition = 'opacity 0.3s ease-out';

          setTimeout(() => {
            heroCtaContainer.style.display = 'none';
            heroFormContainer.style.display = 'block';
            heroFormContainer.style.opacity = '0';
            requestAnimationFrame(() => {
              heroFormContainer.style.transition = 'opacity 0.3s ease-in';
              heroFormContainer.style.opacity = '1';
            });

            const heroEmail = document.getElementById('heroEmail');
            if (heroEmail) {
              heroEmail.focus();
            }
          }, transitionMs);
        });
      }

      setupSubscribeForm({
        formId: 'footerSubscribeForm',
        emailInputId: 'footerEmail',
        formContainerId: 'footerFormContainer',
        confirmationId: 'footerConfirmationMessage',
        eventLabel: 'Footer Subscribe Form Submission',
        suggestionId: 'footerEmailSuggestion',
        signupContentId: 'footerSignupContent',
        lockCardSelector: '.stay-connected',
        confirmationDisplay: 'flex',
      });

      setupSubscribeForm({
        formId: 'heroSubscribeForm',
        emailInputId: 'heroEmail',
        formContainerId: 'heroFormContainer',
        confirmationId: 'heroConfirmationMessage',
        eventLabel: 'Hero Subscribe Form Submission',
      });
    </script>
  </body>
</html>
